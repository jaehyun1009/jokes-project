<%- include('../partials/html-head') %>
<%- include('../partials/nav') %>

<script>
  function showPunchline(){
    document.getElementById('show-punchline').style.display = 'none'
    punchline.hidden = false
  }
</script>

<main class="page">
  <a class="sub-title action-link" href="/jokes">Back</a>
  <h2 class="sub-title"><%= joke.setup %></h2>
  <div class="bottom-section">
  <% if (joke.punchline) { %>
    <button class="action-button" id="show-punchline" onclick="showPunchline()">Show Punchline</button>
    <p id="punchline" hidden><%= joke.punchline %></p>
  <% } %>
  </div>
  <br><br>
  <div class="comment-section">
    <h3>Comments</h3>
    <br>
    <div>
      <% if (user) { %>
      <form action="/jokes/<%= joke._id %>" method="POST">
        <p style="font-size:2rem;"><textarea name="content" rows="5" cols="100"></textarea><p>
        <button class="action-button small-button">Post</button>
      </form>
      <% } %>
    </div>
  </div>
</main>

<%- include('../partials/footer') %>